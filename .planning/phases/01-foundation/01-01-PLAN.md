---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/app.html
  - static/pwa-192x192.png
  - static/pwa-512x512.png
  - static/apple-touch-icon.png
  - static/favicon.ico
autonomous: true

must_haves:
  truths:
    - "PWA meta tags exist in app.html for iOS and Android"
    - "App has proper favicon and PWA icons in static directory"
    - "@vite-pwa/sveltekit is installed as dev dependency"
  artifacts:
    - path: "src/app.html"
      provides: "PWA meta tags (theme-color, apple-mobile-web-app-*, description)"
      contains: "apple-mobile-web-app-capable"
    - path: "static/pwa-192x192.png"
      provides: "PWA icon for Android"
    - path: "static/pwa-512x512.png"
      provides: "PWA icon large/maskable"
    - path: "static/apple-touch-icon.png"
      provides: "iOS home screen icon (180x180)"
    - path: "package.json"
      provides: "@vite-pwa/sveltekit dependency"
      contains: "@vite-pwa/sveltekit"
  key_links: []
---

<objective>
Install @vite-pwa/sveltekit, create PWA icons, and add required PWA meta tags to app.html.

Purpose: Establish the PWA foundation so the app can be installed on mobile devices. This is prerequisite for Plan 03 which will configure the actual service worker.

Output: Package dependency installed, icon files in static/, and app.html with complete PWA meta tags.
</objective>

<execution_context>
@/Users/mike.wojnarowski/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mike.wojnarowski/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md

# Current state
@src/app.html
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install @vite-pwa/sveltekit</name>
  <files>package.json</files>
  <action>
Install @vite-pwa/sveltekit as a dev dependency using bun:

```bash
bun add -D @vite-pwa/sveltekit
```

This is the official vite-pwa integration for SvelteKit 2. Do NOT configure vite.config.ts yet - that happens in Plan 03 after Convex is set up.
  </action>
  <verify>
Run `bun pm ls | grep vite-pwa` to confirm @vite-pwa/sveltekit is installed.
Check package.json contains "@vite-pwa/sveltekit" in devDependencies.
  </verify>
  <done>@vite-pwa/sveltekit appears in package.json devDependencies</done>
</task>

<task type="auto">
  <name>Task 2: Create PWA icon files</name>
  <files>static/pwa-192x192.png, static/pwa-512x512.png, static/apple-touch-icon.png, static/favicon.ico</files>
  <action>
Create placeholder PWA icons in the static directory. For now, generate simple placeholder images that can be replaced later with proper farm branding.

Use a simple approach - create SVG-based PNG placeholders using a tool or create minimal valid PNG files. The icons should be:

1. `static/pwa-192x192.png` - 192x192 PNG (Android PWA icon)
2. `static/pwa-512x512.png` - 512x512 PNG (large/maskable icon)
3. `static/apple-touch-icon.png` - 180x180 PNG (iOS home screen)
4. `static/favicon.ico` - favicon file

For placeholder generation, you can use ImageMagick if available:
```bash
# Create colored square placeholders with "KSF" text
convert -size 192x192 xc:"#4CAF50" -fill white -gravity center -font Helvetica -pointsize 48 -annotate 0 "KSF" static/pwa-192x192.png
convert -size 512x512 xc:"#4CAF50" -fill white -gravity center -font Helvetica -pointsize 120 -annotate 0 "KSF" static/pwa-512x512.png
convert -size 180x180 xc:"#4CAF50" -fill white -gravity center -font Helvetica -pointsize 45 -annotate 0 "KSF" static/apple-touch-icon.png
convert -size 32x32 xc:"#4CAF50" static/favicon.ico
```

If ImageMagick is not available, create minimal valid PNG files using base64 encoded placeholder data or use another available tool.

The green color (#4CAF50) represents farm/nature. "KSF" stands for Kitchen Sink Farm.
  </action>
  <verify>
Verify all icon files exist and have correct dimensions:
```bash
ls -la static/*.png static/*.ico
file static/pwa-192x192.png static/pwa-512x512.png static/apple-touch-icon.png static/favicon.ico
```
  </verify>
  <done>Four icon files exist in static/ directory with appropriate sizes</done>
</task>

<task type="auto">
  <name>Task 3: Add PWA meta tags to app.html</name>
  <files>src/app.html</files>
  <action>
Update src/app.html to include all required PWA meta tags for iOS and Android:

```html
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#4CAF50" />
    <meta name="description" content="Farm chore tracking for the whole team" />

    <!-- iOS PWA Support -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="KSF" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180" />

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" sizes="any" />

    %sveltekit.head%
  </head>
  <body data-sveltekit-preload-data="hover">
    <div style="display: contents">%sveltekit.body%</div>
  </body>
</html>
```

Key meta tags:
- `theme-color`: Green (#4CAF50) for farm branding, used by Android Chrome
- `description`: App description for PWA install prompt
- `apple-mobile-web-app-capable`: Enables standalone mode on iOS
- `apple-mobile-web-app-status-bar-style`: Status bar appearance
- `apple-mobile-web-app-title`: App name on iOS home screen
- `apple-touch-icon`: iOS home screen icon (180x180)
- `favicon`: Standard favicon

Note: The manifest link tag will be injected by @vite-pwa/sveltekit automatically via %sveltekit.head%
  </action>
  <verify>
Read src/app.html and verify it contains:
- meta name="theme-color"
- meta name="apple-mobile-web-app-capable"
- meta name="apple-mobile-web-app-title"
- link rel="apple-touch-icon"
- meta name="description"
  </verify>
  <done>app.html contains all required PWA meta tags for iOS and Android</done>
</task>

</tasks>

<verification>
1. `bun pm ls | grep vite-pwa` shows @vite-pwa/sveltekit installed
2. `ls static/` shows pwa-192x192.png, pwa-512x512.png, apple-touch-icon.png, favicon.ico
3. `grep "apple-mobile-web-app-capable" src/app.html` returns a match
4. `grep "theme-color" src/app.html` returns a match
</verification>

<success_criteria>
- @vite-pwa/sveltekit is in package.json devDependencies
- Four icon files exist in static/ directory
- app.html has theme-color, description, and all iOS PWA meta tags
- App still builds without errors: `bun run build` succeeds (though PWA won't be active until Plan 03)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
